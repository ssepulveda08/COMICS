<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" type="text/css" href="css/stylesheet.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
 
<body>
 
<div class="container">
	<div class="bar-head">
		<div id="imagenes">			
			<img  src="image/logo.png" >
		</div>
			
		<nav>
			<ul>
				<li><a href="">Ingresar</a></li>
				<li><a href="Registro.html">Registro</a></li>	
			</ul>
		</nav>		
	</div>

	<section>
	<div class="divisor">
		
	</div>
		<div class="fondo-login">
			<div class="login-page">
		  		<div class="form">
		  			<h1>Comics DC</h1>		    		
				    <form class="login-form" id="loginf" action="javascript:validarDatos()"/>
				      <input type="text" id="correo" required placeholder="Correo Electronico" title="Digite su Correo Electronico"/>
				      <input type="password" id="contrasena" required placeholder="Contraseña"/ title="Digite su Contraseña">				      
				      <button>Ingresar</button>
				      <p class="message">No tienes una cuenta? <a href="Registro.html">Registrate</a></p>
				    </form>
		  		</div>
			</div>		
		</div>
	</section>
	
	 
	  	<script src='JS/jquery-3.2.0.min.JS'></script>
	    <script src="js/index.js"></script>
	    <script src="js/usuarios.js"></script>
	    <script src="js/Comics.js"></script>
	    	
	    	<script type="text/javascript">

	    	if(!localStorage.getItem("Ausuarios")){
	    		console.log("crear variables para almacenar array")

		    	var Auser = new getUser();	
		    	var Acomics = new getComics();
		    	
		    	localStorage.setItem("Ausuarios", JSON.stringify(Auser));
		    	localStorage.setItem("Aproductos", JSON.stringify(Acomics));

		    }



	    	function validarDatos() {	    	

				var pcontrasena = (document.getElementById("contrasena").value);
				var pcorreo = (document.getElementById("correo").value);

				var arrayuser = localStorage.getItem("Ausuarios");
				var user = new buscarUser(arrayuser, pcorreo);	

	    		console.log(user.contrasena);

	    		if(!user.contrasena){
	    			document.getElementById("loginf").reset();
	    			alert("El usuario no encontrado");
	    		}
	    		else{

	    			if(user.contrasena == pcontrasena){
	    				sessionStorage.setItem("Nombreuser", user.contrasena);
	    				sessionStorage.setItem("Roluser", user.rol);
	    				if(user.rol == 1){
	    					//alert("ADMIN");
	    					location.href="admin.html";
	    				}
	    				else if (user.rol == 2){
	    					//alert("Usuario ");
	    					location.href="home.html";
	    				}
	    				else alert("Fallo");
	    				
	    				
	    			}
	    			else{
	    				document.getElementById("loginf").reset();
	    				alert("la contraseña no coincide");
	    			}
	    		};
	    	}
	    		
	    	</script>

	
</div>
</body>
</html>